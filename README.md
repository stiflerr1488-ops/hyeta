# Hyeta — MVP визуального редактора

Это **десктопное приложение** (не библиотека и не сайт), прототип визуального редактора для многостраничных HTML-проектов.

## На чём написано и почему
- **Язык:** JavaScript (Node.js + Browser JS).
- **Платформа:** Electron.
- **Почему так:** для MVP нужен быстрый доступ к локальной файловой системе, офлайн-режим и живое превью с выполнением JS страниц. Electron закрывает это сразу и позволяет позже сохранить кроссплатформенность (в первую очередь Windows, с запасом на macOS/Linux).

## Что уже реализовано
- Импорт папки проекта и индексация структуры.
- Импорт ZIP-архива: автоматическая распаковка в рабочую папку приложения и открытие как проекта.
- Дерево файлов + список HTML-страниц.
- Живое превью страницы через протокол `appfs://`.
- Клик в превью → редактирование текста и атрибутов (`href/src/alt/title`).
- Сохранение в исходные файлы.
- Отмена/повтор в сессии.
- Поиск по проекту (по текстовым файлам).
- Базовые ограничения безопасности превью.

## Как запускать (Windows)
1. Установить Node.js 20+.
2. В корне проекта выполнить:
   ```bash
   npm install
   npm start
   ```
3. Откроется окно приложения Electron.

## Быстрый запуск через .exe (Windows)
1. Установите зависимости:
   ```bash
   npm install
   ```
2. Соберите инсталлятор/EXE:
   ```bash
   npm run build:win
   ```
3. Готовый `.exe` появится в папке `dist/` (установщик NSIS). Его можно запускать без `npm start`.

## Импорт ZIP
1. Нажмите **«Открыть ZIP»**.
2. Выберите архив сайта (`.zip`).
3. Приложение автоматически распакует архив в служебную папку (`userData/imports/...`) и откроет этот проект.
4. Далее работаете как обычно: превью → правки → сохранение.

> Важно: исходный ZIP не изменяется; изменения пишутся в распакованную рабочую копию.

## Отдельный release-архив
Чтобы получить отдельный архив со всем проектом для передачи:
```bash
npm run release:archive
```

Команда создаст ZIP в папке `dist/` с именем вида `hyeta-visual-editor-release-YYYYMMDD-HHMMSS.zip`.

## Что я проверил в этой среде
- `npm run check` — проходит (проверка синтаксиса JS).
- `npm test` — проходит (тесты индексатора/поиска).
- `npm install`/`npm start` — **не удалось проверить запуск Electron в текущей среде** из-за ограничения доступа к npm registry (`403` на пакет `electron`).

## Проверки
```bash
npm run check
npm test
```

## Горячие клавиши
- `Ctrl+S` — сохранить.
- `Ctrl+Z` / `Ctrl+Y` — отмена / повтор.
- `Ctrl+Shift+F` — фокус на поле поиска по проекту.

## Ограничения текущего MVP
- Экспорт ZIP и сценарий замены изображений заложены в архитектуру, но UI экспорта будет добавлен в следующем шаге.
- Редактор использует DOM-пересборку HTML, что может менять форматирование.
<!-- updated-all-files -->
